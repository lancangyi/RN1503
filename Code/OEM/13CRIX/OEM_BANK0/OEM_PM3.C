/*----------------------------------------------------------------------------
 * Filename: OEM_PM3.C  For Chipset: ITE.IT85XX
 *
 * Function: PMC3 example function
 *
 * Author  : Dino
 * 
 * Copyright (c) 2010 - , ITE Tech. Inc. All Rights Reserved. 
 *
 * You may not present,reproduce,distribute,publish,display,modify,adapt,
 * perform,transmit,broadcast,recite,release,license or otherwise exploit
 * any part of this publication in any form,by any means,without the prior
 * written permission of ITE Tech. Inc.	
 *---------------------------------------------------------------------------*/

#include <CORE_INCLUDE.H>
#include <OEM_INCLUDE.H>

void PMC3Output(BYTE value)
{
    PM3DO = value;
}

void PMC3SetDataCounter(BYTE cunt)
{
    PM34DataCount = cunt;
}

// ----------------------------------------------------------------------------
// Process PMC3 command 60	
// ----------------------------------------------------------------------------
void PMC3_Cmd_60(void)
{
    PMC3SetDataCounter(BufferLength);   // Write PECI_StressToolBuf[];
}

// ----------------------------------------------------------------------------
// Process PMC3 command 61	
// ----------------------------------------------------------------------------
void PMC3_Cmd_61(void)
{
    PECI_PSTReadBuffer();               // Read PECI_StressToolBuf[];
}

// ----------------------------------------------------------------------------
// Process PMC3 command 62	
// ----------------------------------------------------------------------------
void PMC3_Cmd_62(void)
{
    PECI_PSTIssueCmd();
}

// ----------------------------------------------------------------------------
// Process PMC3 command 63	
// ----------------------------------------------------------------------------
void PMC3_Cmd_63(void)
{
    PECI_PSTEndCmd();
}

// ----------------------------------------------------------------------------
// Process PMC3 command 64	
// ----------------------------------------------------------------------------
void PMC3_Cmd_64(void)
{
    PECI_PSTReadStatus();
}

// ----------------------------------------------------------------------------
// Process PMC3 command 65	
// ----------------------------------------------------------------------------
void PMC3_Cmd_65(void)
{
    PECI_PSTReadErrorCount();
}

// ----------------------------------------------------------------------------
// Process PMC3 command 66	
// ----------------------------------------------------------------------------
void PMC3_Cmd_66(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 67	
// ----------------------------------------------------------------------------
void PMC3_Cmd_67(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 68	
// ----------------------------------------------------------------------------
void PMC3_Cmd_68(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 69	
// ----------------------------------------------------------------------------
void PMC3_Cmd_69(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6A	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6A(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6B	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6B(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6C	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6C(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6D	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6D(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6E	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6E(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 command 6F	
// ----------------------------------------------------------------------------
void PMC3_Cmd_6F(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 60	
// ----------------------------------------------------------------------------
void PMC3_Data_60(void)
{
    PECI_PSTWriteBuffer();
}

// ----------------------------------------------------------------------------
// Process PMC3 data 61	
// ----------------------------------------------------------------------------
void PMC3_Data_61(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 62	
// ----------------------------------------------------------------------------
void PMC3_Data_62(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 63	
// ----------------------------------------------------------------------------
void PMC3_Data_63(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 64	
// ----------------------------------------------------------------------------
void PMC3_Data_64(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 65	
// ----------------------------------------------------------------------------
void PMC3_Data_65(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 66	
// ----------------------------------------------------------------------------
void PMC3_Data_66(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 67	
// ----------------------------------------------------------------------------
void PMC3_Data_67(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 68	
// ----------------------------------------------------------------------------
void PMC3_Data_68(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 69	
// ----------------------------------------------------------------------------
void PMC3_Data_69(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6A	
// ----------------------------------------------------------------------------
void PMC3_Data_6A(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6B	
// ----------------------------------------------------------------------------
void PMC3_Data_6B(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6C	
// ----------------------------------------------------------------------------
void PMC3_Data_6C(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6D	
// ----------------------------------------------------------------------------
void PMC3_Data_6D(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6E	
// ----------------------------------------------------------------------------
void PMC3_Data_6E(void)
{

}

// ----------------------------------------------------------------------------
// Process PMC3 data 6F	
// ----------------------------------------------------------------------------
void PMC3_Data_6F(void)
{

}

//----------------------------------------------------------------------------
// Process Command/Data received from System via PMC3 interface
//----------------------------------------------------------------------------
const FUNCT_PTR_V_V code PortPMC3Cmd_table[16] =
{
 	PMC3_Cmd_0X, 			// Process PMC3 command 0x		 
 	PMC3_Cmd_1X, 			// Process PMC3 command 1x	
 	PMC3_Cmd_2X, 			// Process PMC3 command 2x	
 	PMC3_Cmd_3X, 			// Process PMC3 command 3x		 
 	PMC3_Cmd_4X, 			// Process PMC3 command 4x	
 	PMC3_Cmd_5X, 			// Process PMC3 command 5x	
 	PMC3_Cmd_6X, 			// Process PMC3 command 6x	 
 	PMC3_Cmd_7X, 			// Process PMC3 command 7x	
 	PMC3_Cmd_8X, 			// Process PMC3 command 8x	
 	PMC3_Cmd_9X, 			// Process PMC3 command 9x		 
 	PMC3_Cmd_AX, 			// Process PMC3 command Ax	
 	PMC3_Cmd_BX, 			// Process PMC3 command Bx	
 	PMC3_Cmd_CX, 		 	// Process PMC3 command Cx	
 	PMC3_Cmd_DX, 			// Process PMC3 command Dx	
 	PMC3_Cmd_EX, 			// Process PMC3 command Ex	
	PMC3_Cmd_FX 			// Process PMC3 command Fx	
};

const FUNCT_PTR_V_V code PortPMC3Data_table[16] =
{
 	PMC3_Cmd_0XData, 		// Process PMC3 data 0x	 
 	PMC3_Cmd_1XData, 		// Process PMC3 data 1x	
 	PMC3_Cmd_2XData, 		// Process PMC3 data 2x	
 	PMC3_Cmd_3XData, 		// Process PMC3 data 3x			 
 	PMC3_Cmd_4XData, 		// Process PMC3 data 4x	
 	PMC3_Cmd_5XData, 		// Process PMC3 data 5x	
 	PMC3_Cmd_6XData, 		// Process PMC3 data 6x		 
 	PMC3_Cmd_7XData, 		// Process PMC3 data 7x	
 	PMC3_Cmd_8XData, 		// Process PMC3 data 8x	
 	PMC3_Cmd_9XData, 		// Process PMC3 data 9x			 
 	PMC3_Cmd_AXData, 		// Process PMC3 data Ax	
 	PMC3_Cmd_BXData, 		// Process PMC3 data Bx	
 	PMC3_Cmd_CXData, 		// Process PMC3 data Cx			 
 	PMC3_Cmd_DXData, 		// Process PMC3 data Dx	
 	PMC3_Cmd_EXData, 		// Process PMC3 data Ex	
	PMC3_Cmd_FXData 		// Process PMC3 data Fx	
};
void service_pci4(void)
{
    if ( IS_MASK_CLEAR(PM3STS,P_IBF) )  
    {
		return; 
    }
	
	if ( PM3STS & P_C_D)	// Command port
	{
   		PM34Cmd  = PM3DI;	// Load command
		EnablePMC3IBFInt();
   		PMC3SetDataCounter(0x00);
		(PortPMC3Cmd_table[PM34Cmd>>4])(); // Handle command		
	}
	else					// Data port
	{
        if(PM34DataCount==0x00)   
        {
            PM34Data = PM3DI; 
            EnablePMC3IBFInt();
        } 
        else 
        {
            PM34Data = PM3DI;
            EnablePMC3IBFInt();
            if (PM34DataCount!=0x00) 
            {
		        (PortPMC3Data_table[PM34Cmd>>4])(); // Handle command data
		        PM34DataCount--;
		    }
	    }
	}
}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 0x.
//----------------------------------------------------------------------------
void PMC3_Cmd_0X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 1x.
//----------------------------------------------------------------------------
void PMC3_Cmd_1X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 2x.
//----------------------------------------------------------------------------
void PMC3_Cmd_2X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 3x.
//----------------------------------------------------------------------------
void PMC3_Cmd_3X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 4x.
//----------------------------------------------------------------------------
void PMC3_Cmd_4X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 5x.
//----------------------------------------------------------------------------
void PMC3_Cmd_5X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 command 6x.
//----------------------------------------------------------------------------
const FUNCT_PTR_V_V code PMC3Cmd6X_table[16] =
{
 	PMC3_Cmd_60, 			// Process PMC3 command 60	
 	PMC3_Cmd_61, 			// Process PMC3 command 61	
  	PMC3_Cmd_62, 			// Process PMC3 command 62		
  	PMC3_Cmd_63, 			// Process PMC3 command 63	
  	PMC3_Cmd_64, 			// Process PMC3 command 64	
  	PMC3_Cmd_65, 			// Process PMC3 command 65	
  	PMC3_Cmd_66, 			// Process PMC3 command 66	
  	PMC3_Cmd_67, 			// Process PMC3 command 67	
  	PMC3_Cmd_68, 			// Process PMC3 command 68	
  	PMC3_Cmd_69, 			// Process PMC3 command 69	
  	PMC3_Cmd_6A, 			// Process PMC3 command 6A	
  	PMC3_Cmd_6B, 			// Process PMC3 command 6B	
  	PMC3_Cmd_6C, 			// Process PMC3 command 6C	
  	PMC3_Cmd_6D, 			// Process PMC3 command 6D	
  	PMC3_Cmd_6E, 			// Process PMC3 command 6E		
  	PMC3_Cmd_6F 			// Process PMC3 command 6F	
};

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 6x.
//----------------------------------------------------------------------------
void PMC3_Cmd_6X(void)
{
	(PMC3Cmd6X_table[PM34Cmd&0x0F])(); 
}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 7x.
//----------------------------------------------------------------------------
void PMC3_Cmd_7X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 8x.
//----------------------------------------------------------------------------
void PMC3_Cmd_8X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port 9x.
//----------------------------------------------------------------------------
void PMC3_Cmd_9X(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Ax.
//----------------------------------------------------------------------------
void PMC3_Cmd_AX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Bx.
//----------------------------------------------------------------------------
void PMC3_Cmd_BX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Cx.
//----------------------------------------------------------------------------
void PMC3_Cmd_CX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Dx.
//----------------------------------------------------------------------------
void PMC3_Cmd_DX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Ex.
//----------------------------------------------------------------------------
void PMC3_Cmd_EX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 cmd port Fx.
//----------------------------------------------------------------------------
void PMC3_Cmd_FX(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 0x.
//----------------------------------------------------------------------------
void PMC3_Cmd_0XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 1x.
//----------------------------------------------------------------------------
void PMC3_Cmd_1XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 2x.
//----------------------------------------------------------------------------
void PMC3_Cmd_2XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 3x.
//----------------------------------------------------------------------------
void PMC3_Cmd_3XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 4x.
//----------------------------------------------------------------------------
void PMC3_Cmd_4XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 5x.
//----------------------------------------------------------------------------
void PMC3_Cmd_5XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data 6x.
//----------------------------------------------------------------------------
const FUNCT_PTR_V_V code PMC3Data6X_table[16] =
{
 	PMC3_Data_60, 			// Process PMC3 Data 60	
 	PMC3_Data_61, 			// Process PMC3 Data 61	
  	PMC3_Data_62, 			// Process PMC3 Data 62		
  	PMC3_Data_63, 			// Process PMC3 Data 63	
  	PMC3_Data_64, 			// Process PMC3 Data 64	
  	PMC3_Data_65, 			// Process PMC3 Data 65	
  	PMC3_Data_66, 			// Process PMC3 Data 66	
  	PMC3_Data_67, 			// Process PMC3 Data 67	
  	PMC3_Data_68, 			// Process PMC3 Data 68	
  	PMC3_Data_69, 			// Process PMC3 Data 69	
  	PMC3_Data_6A, 			// Process PMC3 Data 6A	
  	PMC3_Data_6B, 			// Process PMC3 Data 6B	
  	PMC3_Data_6C, 			// Process PMC3 Data 6C	
  	PMC3_Data_6D, 			// Process PMC3 Data 6D	
  	PMC3_Data_6E, 			// Process PMC3 Data 6E		
  	PMC3_Data_6F 			// Process PMC3 Data 6F	
};
//----------------------------------------------------------------------------
// Handle PMC3 data port 6x.
//----------------------------------------------------------------------------
void PMC3_Cmd_6XData(void)
{
	(PMC3Data6X_table[PM34Cmd&0x0F])(); 
}

//----------------------------------------------------------------------------
// Handle PMC3 data port 7x.
//----------------------------------------------------------------------------
void PMC3_Cmd_7XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 8x.
//----------------------------------------------------------------------------
void PMC3_Cmd_8XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port 9x.
//----------------------------------------------------------------------------
void PMC3_Cmd_9XData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Ax.
//----------------------------------------------------------------------------
void PMC3_Cmd_AXData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Bx.
//----------------------------------------------------------------------------
void PMC3_Cmd_BXData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Cx.
//----------------------------------------------------------------------------
void PMC3_Cmd_CXData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Dx.
//----------------------------------------------------------------------------
void PMC3_Cmd_DXData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Ex.
//----------------------------------------------------------------------------
void PMC3_Cmd_EXData(void)
{

}

//----------------------------------------------------------------------------
// Handle PMC3 data port Fx.
//----------------------------------------------------------------------------
void PMC3_Cmd_FXData(void)
{

}